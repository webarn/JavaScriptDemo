<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>页面登录</title>
  <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
  <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
    crossorigin="anonymous">

  <!-- 可选的 Bootstrap 主题文件（一般不用引入） -->
  <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
    crossorigin="anonymous">

  <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
  <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
    crossorigin="anonymous"></script>
</head>

<body>
  <div class="container text-center">
    <h3>总学馆</h3>

    <form class="form-horizontal">
      <div class="form-group">
        <label for="username" class="col-sm-2 control-label">用户名:</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="username" placeholder="输入您的用户名">
        </div>
      </div>
      <div class="form-group">
        <label for="password" class="col-sm-2 control-label">密码:</label>
        <div class="col-sm-10">
          <input type="password" class="form-control" id="password" placeholder="输入您的密码">
        </div>
      </div>

    </form>
    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <button class="btn btn-default">登 录</button>
      </div>
    </div>
  </div>

</body>
<script>
  $(function () {
    $('.btn-default').click(function () {
      let data = {
        username: $('#username').val(),
        password: $('#password').val()
      };

      $.post({
        url: 'http://127.0.0.1:3000/login',
        data: data,
        success: function (res) {
          // if(res.status.ok)
          console.log(res);
          switch (res.status) {
            case 0:
              alert('服务器错误')
              break;

            case 1:
              alert('登录成功')
              break;

            case 2:
              alert('用户未注册')
              window.location.href = 'http://127.0.0.1:3000/reg';
              break;
          }
        }
      })
    })
  })

</script>

</html>